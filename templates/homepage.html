{% extends 'layout.html' %}
{% set title = 'Adviser Allocation System' %}

{% block content %}
<div class="topbar">
  <h2>Adviser Allocation System</h2>
  <div class="datebox"><span>Today: {{ today }}</span><span>Week: {{ week_num }}</span></div>
</div>

<div class="grid-2">
  <div class="card">
    <h4>Availability & Scheduling</h4>
    <p class="muted">View and manage adviser availability</p>
    <div class="button-stack">
      <a href="/availability/earliest" style="text-decoration: none;">
        <button class="full-width">View Earliest Availability</button>
      </a>
      <a href="/availability/schedule" style="text-decoration: none;">
        <button class="secondary full-width">View Adviser Schedule</button>
      </a>
      <a href="/availability/matrix" style="text-decoration: none;">
        <button class="secondary full-width">Availability Matrix</button>
      </a>
    </div>
  </div>

  <div class="card">
    <h4>Allocation Management</h4>
    <p class="muted">Allocate clients and view history</p>
    <div class="button-stack">
      <a href="/post/allocate" style="text-decoration: none;">
        <button class="full-width">Client Allocation</button>
      </a>
      <a href="/allocations/history" style="text-decoration: none;">
        <button class="secondary full-width">Allocation History</button>
      </a>
      <a href="/workflows" style="text-decoration: none;">
        <button class="secondary full-width">Automation Workflows</button>
      </a>
    </div>
  </div>

  <div class="card">
    <h4>System Configuration</h4>
    <p class="muted">Manage settings and overrides</p>
    <div class="button-stack">
      <a href="/closures/ui" style="text-decoration: none;">
        <button class="secondary full-width">Closures Management</button>
      </a>
      <a href="/capacity_overrides/ui" style="text-decoration: none;">
        <button class="secondary full-width">Capacity Overrides</button>
      </a>
    </div>
  </div>
</div>

<div class="card info-card">
  <h4>Quick Info</h4>
  <div class="info-grid">
    <div><strong>Today:</strong> <span class="muted">{{ today }}</span></div>
    <div><strong>Week:</strong> <span class="muted">{{ week_num }}</span></div>
    <div><strong>Sydney Time:</strong> <span class="muted">{{ sydney_time }}</span></div>
  </div>
</div>
{% endblock %}

{% block head %}
<style>
  .card h4 {
    margin: 0 0 16px 0;
    color: var(--text);
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 1.2em;
    font-family: 'Outfit', sans-serif;
  }

  .card p.muted {
    margin: 0 0 20px 0;
    font-size: 0.95em;
  }

  .button-stack {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .button-stack a {
    text-decoration: none;
  }

  .full-width {
    width: 100%;
    padding: 12px 16px;
    font-size: 1em;
  }

  .info-card {
    background: linear-gradient(135deg, #0F172A 0%, #1E293B 100%);
    color: #F8FAFC;
    border: none;
    margin-top: 32px;
    border-radius: var(--radius-lg);
  }

  .info-card h4 {
    color: #fff;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    padding-bottom: 12px;
    margin-bottom: 16px;
  }

  .info-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 24px;
    font-size: 0.95em;
  }

  .info-grid>div {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .info-grid .muted {
    color: #94A3B8;
    font-weight: 500;
  }

  @media (max-width: 900px) {
    .info-grid {
      gap: 16px;
      flex-direction: column;
      align-items: flex-start;
    }
  }
</style>
{% endblock %}